<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>nrhhometuatonviuro — Mayur Sir | Home Tuitions</title>
    <meta name="description" content="nrhhometuatonviuro - Trusted Home Tuitions at Your Doorstep. Donar Choke, Darbhanga (846004). Call: 7061965692" />

    <style>
        :root{
            --blue:#0b6cf2;
            --dark:#0b2540;
            --muted:#6b7280;
            --card:#ffffff;
            --bg:#f6f8fb;
            --accent:#0b6cf2;
            --container:1100px;
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        *{box-sizing:border-box}
        html,body{height:100%}
        body{
            margin:0;
            background:var(--bg);
            color:var(--dark);
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            line-height:1.45;
        }
        .container{max-width:var(--container);margin:0 auto;padding:28px;}
        header{
            background:linear-gradient(90deg, rgba(11,108,242,0.08), rgba(11,108,242,0.02));
            position:sticky;top:0;backdrop-filter: blur(4px); z-index:20; border-bottom:1px solid rgba(11,108,242,0.06)
        }
        .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
        .brand{display:flex;gap:12px;align-items:center}
        .logo{
            width:46px;height:46px;padding:8px;border-radius:10px;background:white;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(11,108,242,0.08)
        }
        .brand h1{font-size:18px;margin:0}
        .brand p{margin:0;font-size:12px;color:var(--muted)}
        nav a{margin-left:14px;text-decoration:none;color:var(--dark);font-weight:600}
        .cta{background:var(--accent);color:white;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:700}
        main{padding:28px 0}
        .hero{
            display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center;margin-bottom:28px;
        }
        .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(23,28,37,0.06)}
        .hero h2{margin:0 0 12px 0;font-size:28px}
        .hero p{color:var(--muted);margin:0 0 16px 0}
        .features{display:flex;gap:12px;flex-wrap:wrap}
        .feature{background:linear-gradient(180deg,#fff,#f7fbff);padding:10px 12px;border-radius:10px;min-width:160px}
        .subjects-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-top:12px}
        .subject{padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfdff);display:flex;align-items:center;gap:10px}
        .subject b{display:block}

        /* forms */
        form .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
        label{display:block;font-size:13px;margin-bottom:6px}
        input[type=text], input[type=email], input[type=tel], select, textarea{
            width:100%;padding:10px;border-radius:8px;border:1px solid #e6eefb;background:transparent;
        }
        textarea{min-height:110px;resize:vertical}
        .full{grid-column:1/-1}
        .actions{display:flex;gap:10px;align-items:center}
        button{background:var(--accent);color:white;padding:10px 14px;border:0;border-radius:8px;font-weight:700;cursor:pointer}
        .btn-outline{background:transparent;border:1px solid rgba(11,108,242,0.18);color:var(--accent);padding:8px 12px}
        .muted{color:var(--muted);font-size:14px}

        /* contact & footer */
        footer{margin-top:36px;padding:18px 0;text-align:center;color:var(--muted);font-size:14px}

        /* responsive */
        @media (max-width:880px){
            .hero{grid-template-columns:1fr; }
            form .row{grid-template-columns:1fr}
            nav a{display:none}
            .nav .mobile-menu{display:block}
        }
        /* small helper */
        .small{font-size:13px;color:var(--muted)}
        .wh-btn{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:999px;background:#25D366;color:white;text-decoration:none}
        .admin-link{font-size:13px;color:var(--muted);cursor:pointer;text-decoration:underline;background:none;border:0}
        .video-wrap{border-radius:10px;overflow:hidden}
        .badge{font-size:12px;padding:6px 8px;border-radius:8px;background:rgba(11,108,242,0.08);display:inline-block}
        table{width:100%;border-collapse:collapse}
        table th, table td{padding:8px;border-bottom:1px solid #f1f5f9;text-align:left;font-size:13px}
        .center{text-align:center}
    </style>
</head>
<body>

<header>
    <div class="container nav">
        <div class="brand">
            <div class="logo" aria-hidden>
                <!-- simple svg logo -->
                <svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="3" width="20" height="18" rx="3" fill="#0b6cf2" opacity="0.12"/>
                    <path d="M7 7h10v2H7zM7 10h7v2H7z" fill="#0b6cf2"/>
                </svg>
            </div>
            <div>
                <h1>nrhhometuatonviuro</h1>
                <p class="small">Mayur Sir — Trusted Home Tuitions at Your Doorstep</p>
            </div>
        </div>

        <div>
            <nav aria-label="Primary">
                <a href="#home">Home</a>
                <a href="#subjects">Subjects</a>
                <a href="#registration">Register</a>
                <a href="#tutor">Tutor Join</a>
                <a href="#contact">Contact</a>
                <a class="cta" href="#registration">Register Now</a>
            </nav>
        </div>
    </div>
</header>

<main class="container" id="home">
    <section class="hero">
        <div>
            <div class="card">
                <span class="badge">Donar Choke, Darbhanga • PIN 846004</span>
                <h2>Welcome to nrhhometuatonviuro</h2>
                <p class="muted">Personal & home tuitions for Class 1–12 in Science, Maths, SST, Hindi, English & Computer. Call / WhatsApp: <b>7061965692</b></p>

                <div style="margin-top:16px" class="features">
                    <div class="feature">
                        <strong>Experienced Tutors</strong>
                        <div class="small">Qualified & patient teachers</div>
                    </div>
                    <div class="feature">
                        <strong>Flexible Timings</strong>
                        <div class="small">Morning / Evening / Weekend</div>
                    </div>
                    <div class="feature">
                        <strong>Offline & Online</strong>
                        <div class="small">Home visits or online video classes</div>
                    </div>
                </div>

                <div style="margin-top:18px;display:flex;gap:10px;flex-wrap:wrap;align-items:center">
                    <a class="wh-btn" href="https://wa.me/917061965692" target="_blank" rel="noopener">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="white" d="M20.5 3.5A11 11 0 0 0 3 8.7c0 1.9.5 3.7 1.5 5.3L3 21l7.2-1.8c1.5 1 3.3 1.4 5.2 1.4A11 11 0 0 0 20.5 3.5z"/></svg>
                        WhatsApp: 7061965692
                    </a>
                    <a class="btn-outline" href="#registration">Student Register</a>
                    <a class="btn-outline" href="#tutor">Tutor Join</a>
                </div>

                <div style="margin-top:16px" class="small">Email: <a href="mailto:hometuator.nrh@gmail.com">hometuator.nrh@gmail.com</a></div>
            </div>

            <div style="margin-top:16px" class="card">
                <h3 style="margin-top:0">Subjects we teach</h3>
                <div class="subjects-grid">
                    <div class="subject"><div><b>Science</b><div class="small">Class 6–10</div></div></div>
                    <div class="subject"><div><b>Mathematics</b><div class="small">Basics to Advanced</div></div></div>
                    <div class="subject"><div><b>SST</b><div class="small">History, Geography & Civics</div></div></div>
                    <div class="subject"><div><b>Hindi</b><div class="small">Grammar & Literature</div></div></div>
                    <div class="subject"><div><b>English</b><div class="small">Reading & Writing</div></div></div>
                    <div class="subject"><div><b>Computer</b><div class="small">Basics & MS Office</div></div></div>
                </div>
            </div>

        </div>

        <aside>
            <div class="card">
                <h3 style="margin-top:0">Quick Registration</h3>
                <form id="quickRegister">
                    <label>Name <input type="text" id="q_name" required placeholder="Student / Parent name" /></label>
                    <label>Phone <input type="tel" id="q_phone" required placeholder="7061965692" /></label>
                    <label>Email <input type="email" id="q_email" placeholder="parent@example.com" /></label>
                    <label>Class
                        <select id="q_class">
                            <option value="">Select class</option>
                            <option>Class 1</option><option>Class 2</option><option>Class 3</option><option>Class 4</option>
                            <option>Class 5</option><option>Class 6</option><option>Class 7</option><option>Class 8</option>
                            <option>Class 9</option><option>Class 10</option><option>Class 11</option><option>Class 12</option>
                        </select>
                    </label>
                    <label>Subjects
                        <select id="q_subject" multiple size="4">
                            <option>Science</option><option>Mathematics</option><option>SST</option><option>Hindi</option><option>English</option><option>Computer</option>
                        </select>
                    </label>
                    <div class="actions" style="margin-top:8px">
                        <button type="submit">Register</button>
                        <button type="button" class="btn-outline" id="viewAdmin">Admin</button>
                    </div>
                    <div id="q_status" class="small" style="margin-top:8px"></div>
                </form>
            </div>

            <div style="margin-top:14px" class="card">
                <h4 style="margin:8px 0">Intro Video</h4>
                <div class="video-wrap">
                    <!-- placeholder, replace with YouTube embed if available -->
                    <iframe width="100%" height="220" src="https://www.youtube.com/embed?listType=search&list=home+tution+classes" title="Intro" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
        </aside>
    </section>

    <!-- About -->
    <section id="about" class="card" style="margin-bottom:18px;padding:18px">
        <h3>About Us</h3>
        <p class="muted">Hi — I'm <strong>Mayur Sir</strong>. I run nrhhometuatonviuro from Donar Choke, Darbhanga. We provide patient, result-oriented tutors for school students and help with homework, exam prep and board papers. Our tutors are experienced and follow simple step-by-step teaching methods.</p>
        <div style="margin-top:12px" class="small"><strong>Contact:</strong> 7061965692 • <a href="mailto:hometuator.nrh@gmail.com">hometuator.nrh@gmail.com</a></div>
    </section>

    <!-- Subjects (anchor) -->
    <section id="subjects" class="card" style="margin-bottom:18px;padding:18px">
        <h3>Subjects & Classes</h3>
        <p class="muted">We cover all classes from 1 to 12. Popular combinations include Maths+Science for classes 6–10, and subject-specific coaching for board exams.</p>
        <div style="margin-top:12px" class="subjects-grid">
            <div class="subject"><div><b>Science</b><div class="small">Experiments, theory & MCQs</div></div></div>
            <div class="subject"><div><b>Mathematics</b><div class="small">Basics, algebra & geometry</div></div></div>
            <div class="subject"><div><b>SST</b><div class="small">History, Geography</div></div></div>
            <div class="subject"><div><b>Hindi</b><div class="small">Grammar & prose</div></div></div>
            <div class="subject"><div><b>English</b><div class="small">Comprehension & writing</div></div></div>
            <div class="subject"><div><b>Computer</b><div class="small">MS Office & basics</div></div></div>
        </div>
    </section>

    <!-- Registration -->
    <section id="registration" class="card" style="margin-bottom:18px;padding:18px">
        <h3>Student Registration</h3>
        <form id="studentForm">
            <div class="row">
                <label>Full Name <input type="text" id="s_name" required /></label>
                <label>Phone <input type="tel" id="s_phone" required /></label>
                <label>Email <input type="email" id="s_email" /></label>
                <label>Class
                    <select id="s_class" required>
                        <option value="">Select class</option>
                        <option>Class 1</option><option>Class 2</option><option>Class 3</option><option>Class 4</option>
                        <option>Class 5</option><option>Class 6</option><option>Class 7</option><option>Class 8</option>
                        <option>Class 9</option><option>Class 10</option><option>Class 11</option><option>Class 12</option>
                    </select>
                </label>
                <label>Preferred Mode
                    <select id="s_mode">
                        <option>Home Visit</option><option>Online</option><option>Either</option>
                    </select>
                </label>
                <label class="full">Subjects (choose one or more)
                    <select id="s_subjects" multiple size="5">
                        <option>Science</option><option>Mathematics</option><option>SST</option><option>Hindi</option><option>English</option><option>Computer</option>
                    </select>
                </label>
                <label class="full">Address <textarea id="s_address" placeholder="Your address / locality (e.g., Donar Choke, Darbhanga)"></textarea></label>
                <label>Preferred Time <input type="text" id="s_time" placeholder="e.g., Evening, 5–7pm" /></label>
                <label>How did you hear about us? <input type="text" id="s_source" /></label>
            </div>

            <div style="margin-top:10px" class="actions">
                <button type="submit">Submit Registration</button>
                <button type="button" class="btn-outline" id="studentClear">Clear</button>
                <div style="margin-left:auto" class="small">We will contact you at <b>7061965692</b> after registration.</div>
            </div>
            <div id="studentStatus" class="small" style="margin-top:8px"></div>
        </form>
    </section>

    <!-- Tutor Join -->
    <section id="tutor" class="card" style="margin-bottom:18px;padding:18px">
        <h3>Tutor Registration / Join as Tutor</h3>
        <form id="tutorForm">
            <div class="row">
                <label>Name <input type="text" id="t_name" required /></label>
                <label>Phone <input type="tel" id="t_phone" required /></label>
                <label>Email <input type="email" id="t_email" /></label>
                <label>Qualification <input type="text" id="t_qual" placeholder="e.g., BSc, BEd" /></label>
                <label>Experience <input type="text" id="t_exp" placeholder="e.g., 3 years" /></label>
                <label>Subjects (comma separated) <input type="text" id="t_subjects" /></label>
                <label class="full">Location / Area <input type="text" id="t_area" placeholder="Donar Choke, Darbhanga" /></label>
            </div>

            <div style="margin-top:10px" class="actions">
                <button type="submit">Join as Tutor</button>
                <button type="button" class="btn-outline" id="tutorClear">Clear</button>
                <div style="margin-left:auto" class="small">We will review your profile and contact you.</div>
            </div>
            <div id="tutorStatus" class="small" style="margin-top:8px"></div>
        </form>
    </section>

    <!-- Contact -->
    <section id="contact" class="card" style="margin-bottom:18px;padding:18px">
        <h3>Contact Us</h3>
        <p class="muted">For quick messages use WhatsApp or call directly.</p>

        <div style="display:flex;gap:12px;flex-wrap:wrap">
            <div style="flex:1;min-width:260px" class="card">
                <h4 style="margin:0 0 8px 0">Contact Info</h4>
                <div class="small"><strong>Owner:</strong> Mayur Sir</div>
                <div class="small"><strong>Phone:</strong> <a href="tel:+917061965692">7061965692</a></div>
                <div class="small"><strong>Email:</strong> <a href="mailto:hometuator.nrh@gmail.com">hometuator.nrh@gmail.com</a></div>
                <div class="small"><strong>Address:</strong> Donar Choke, Darbhanga, PIN 846004</div>
                <div style="margin-top:8px">
                    <a class="wh-btn" href="https://wa.me/917061965692" target="_blank" rel="noopener">Chat on WhatsApp</a>
                    <a class="btn-outline" href="mailto:hometuator.nrh@gmail.com">Send Email</a>
                </div>
            </div>

            <div style="flex:1;min-width:260px" class="card">
                <h4 style="margin-top:0">Send a Message</h4>
                <form id="contactForm">
                    <label>Name <input type="text" id="c_name" required /></label>
                    <label>Email <input type="email" id="c_email" /></label>
                    <label class="full">Message <textarea id="c_message" required></textarea></label>
                    <div class="actions">
                        <button type="submit">Send</button>
                        <button type="button" class="btn-outline" id="contactClear">Clear</button>
                    </div>
                    <div id="contactStatus" class="small" style="margin-top:8px"></div>
                </form>
            </div>
        </div>

    </section>

    <footer class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px">
            <div>© <strong>nrhhometuatonviuro</strong> • Donar Choke, Darbhanga • PIN 846004</div>
            <div class="small">Made with ❤️ by Mayur Sir • <button class="admin-link" id="openAdmin">Admin Panel</button></div>
        </div>
    </footer>
</main>

<!-- Admin modal (simple) -->
<div id="adminModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.35);z-index:60;align-items:center;justify-content:center">
    <div style="width:92%;max-width:960px;background:white;border-radius:12px;padding:18px;max-height:90vh;overflow:auto">
        <div style="display:flex;align-items:center;justify-content:space-between">
            <h3 style="margin:0">Admin — Registrations</h3>
            <div>
                <button class="btn-outline" id="exportCsv">Export CSV</button>
                <button id="closeAdmin" class="btn-outline">Close</button>
            </div>
        </div>
        <hr />
        <div id="adminContent" style="margin-top:10px"></div>
    </div>
</div>

<script>
/*
    Simple static-site JS:
    - Saves student & tutor registrations & messages to localStorage
    - Shows admin panel (client-side password)
    - Export CSV
*/

const STORAGE_KEYS = { students: 'nrh_students_v1', tutors: 'nrh_tutors_v1', messages: 'nrh_msgs_v1' };

function load(key){ try{ return JSON.parse(localStorage.getItem(key)) || []; } catch(e){ return []; } }
function save(key, arr){ localStorage.setItem(key, JSON.stringify(arr)); }

// helper: append registration object with timestamp
function addRecord(key, obj){
    const arr = load(key);
    obj._ts = new Date().toISOString();
    arr.unshift(obj);
    save(key, arr);
}

// convert array of objects to CSV (simple)
function toCSV(arr){
    if(!arr || arr.length===0) return '';
    const keys = Object.keys(arr[0]);
    const lines = [keys.join(',')];
    for(const r of arr){
        lines.push(keys.map(k => {
            const v = (r[k]===undefined || r[k]===null) ? '' : String(r[k]).replace(/"/g,'""');
            return '"' + v + '"';
        }).join(','));
    }
    return lines.join('\n');
}

// show status message helper
function setStatus(el, txt, ok=true){
    el.textContent = txt;
    el.style.color = ok ? 'green' : 'crimson';
    setTimeout(()=>{ el.textContent=''; }, 5000);
}

/* Quick Register handler */
document.getElementById('quickRegister').addEventListener('submit', function(e){
    e.preventDefault();
    const name = document.getElementById('q_name').value.trim();
    const phone = document.getElementById('q_phone').value.trim();
    if(!name || !phone){ setStatus(document.getElementById('q_status'), 'Please fill name & phone', false); return; }
    const rec = {
        name, phone, email: document.getElementById('q_email').value.trim(),
        cls: document.getElementById('q_class').value,
        subjects: Array.from(document.getElementById('q_subject').selectedOptions).map(o=>o.value).join('; '),
        mode: 'Quick registration'
    };
    addRecord(STORAGE_KEYS.students, rec);
    setStatus(document.getElementById('q_status'), 'Registration saved locally ✓');
    document.getElementById('quickRegister').reset();
});

/* Student form */
document.getElementById('studentForm').addEventListener('submit', function(e){
    e.preventDefault();
    const name = document.getElementById('s_name').value.trim();
    const phone = document.getElementById('s_phone').value.trim();
    if(!name || !phone){ setStatus(document.getElementById('studentStatus'), 'Please provide name and phone', false); return; }
    const rec = {
        name, phone, email: document.getElementById('s_email').value.trim(),
        class: document.getElementById('s_class').value,
        mode: document.getElementById('s_mode').value,
        subjects: Array.from(document.getElementById('s_subjects').selectedOptions).map(o=>o.value).join('; '),
        address: document.getElementById('s_address').value.trim(),
        time: document.getElementById('s_time').value.trim(),
        source: document.getElementById('s_source').value.trim()
    };
    addRecord(STORAGE_KEYS.students, rec);
    setStatus(document.getElementById('studentStatus'), 'Student registered locally ✓');
    document.getElementById('studentForm').reset();
});

/* Tutor form */
document.getElementById('tutorForm').addEventListener('submit', function(e){
    e.preventDefault();
    const name = document.getElementById('t_name').value.trim();
    const phone = document.getElementById('t_phone').value.trim();
    if(!name || !phone){ setStatus(document.getElementById('tutorStatus'), 'Please provide name and phone', false); return; }
    const rec = {
        name, phone, email: document.getElementById('t_email').value.trim(),
        qual: document.getElementById('t_qual').value.trim(),
        exp: document.getElementById('t_exp').value.trim(),
        subjects: document.getElementById('t_subjects').value.trim(),
        area: document.getElementById('t_area').value.trim()
    };
    addRecord(STORAGE_KEYS.tutors, rec);
    setStatus(document.getElementById('tutorStatus'), 'Tutor application saved locally ✓');
    document.getElementById('tutorForm').reset();
});

/* Contact form */
document.getElementById('contactForm').addEventListener('submit', function(e){
    e.preventDefault();
    const name = document.getElementById('c_name').value.trim();
    const msg = document.getElementById('c_message').value.trim();
    if(!name || !msg){ setStatus(document.getElementById('contactStatus'), 'Name and message required', false); return; }
    const rec = { name, email: document.getElementById('c_email').value.trim(), message: msg };
    addRecord(STORAGE_KEYS.messages, rec);
    setStatus(document.getElementById('contactStatus'), 'Message saved locally ✓');
    document.getElementById('contactForm').reset();
});

/* clear buttons */
document.getElementById('studentClear').addEventListener('click', ()=>document.getElementById('studentForm').reset());
document.getElementById('tutorClear').addEventListener('click', ()=>document.getElementById('tutorForm').reset());
document.getElementById('contactClear').addEventListener('click', ()=>document.getElementById('contactForm').reset());

/* Admin panel open (simple password prompt) */
function renderAdmin(){
    const students = load(STORAGE_KEYS.students);
    const tutors = load(STORAGE_KEYS.tutors);
    const msgs = load(STORAGE_KEYS.messages);

    let html = '<h4>Students ('+students.length+')</h4>';
    if(students.length){
        html += '<table><thead><tr><th>Name</th><th>Phone</th><th>Class/Mode</th><th>Subjects</th><th>Address/Time</th><th>When</th></tr></thead><tbody>';
        for(const s of students){
            html += `<tr><td>${escapeHtml(s.name)}</td><td>${escapeHtml(s.phone)}</td><td>${escapeHtml(s.class||s.cls||'')}</td><td>${escapeHtml(s.subjects||'')}</td><td>${escapeHtml((s.address? s.address + ' / ' : '') + (s.time||''))}</td><td>${new Date(s._ts).toLocaleString()}</td></tr>`;
        }
        html += '</tbody></table>';
    } else html += '<div class="small">No student registrations yet.</div>';

    html += '<h4 style="margin-top:12px">Tutors ('+tutors.length+')</h4>';
    if(tutors.length){
        html += '<table><thead><tr><th>Name</th><th>Phone</th><th>Qual/Exp</th><th>Subjects</th><th>Area</th><th>When</th></tr></thead><tbody>';
        for(const t of tutors){
            html += `<tr><td>${escapeHtml(t.name)}</td><td>${escapeHtml(t.phone)}</td><td>${escapeHtml(t.qual||'') + ' / ' + escapeHtml(t.exp||'')}</td><td>${escapeHtml(t.subjects||'')}</td><td>${escapeHtml(t.area||'')}</td><td>${new Date(t._ts).toLocaleString()}</td></tr>`;
        }
        html += '</tbody></table>';
    } else html += '<div class="small">No tutor applications yet.</div>';

    html += '<h4 style="margin-top:12px">Messages ('+msgs.length+')</h4>';
    if(msgs.length){
        html += '<table><thead><tr><th>Name</th><th>Email</th><th>Message</th><th>When</th></tr></thead><tbody>';
        for(const m of msgs){
            html += `<tr><td>${escapeHtml(m.name)}</td><td>${escapeHtml(m.email||'')}</td><td>${escapeHtml(m.message)}</td><td>${new Date(m._ts).toLocaleString()}</td></tr>`;
        }
        html += '</tbody></table>';
    } else html += '<div class="small">No messages yet.</div>';

    document.getElementById('adminContent').innerHTML = html;
}

/* admin open handlers */
document.getElementById('openAdmin').addEventListener('click', openAdminWithPrompt);
document.getElementById('viewAdmin').addEventListener('click', openAdminWithPrompt);
document.getElementById('closeAdmin').addEventListener('click', ()=>{ document.getElementById('adminModal').style.display='none'; });

function openAdminWithPrompt(){
    // client-side password only for convenience (NOT secure!)
    const pass = prompt('Enter admin password (client-side):');
    if(pass === null) return;
    if(pass.trim() === 'admin123'){ // default password. Change or remove in production.
        renderAdmin();
        document.getElementById('adminModal').style.display = 'flex';
    } else {
        alert('Wrong password.');
    }
}

/* export csv */
document.getElementById('exportCsv').addEventListener('click', ()=>{
    const students = load(STORAGE_KEYS.students);
    const tutors = load(STORAGE_KEYS.tutors);
    const msgs = load(STORAGE_KEYS.messages);
    let combined = [];
    // mark type to separate
    combined = combined.concat(students.map(s => ({type:'student', ...s})));
    combined = combined.concat(tutors.map(t => ({type:'tutor', ...t})));
    combined = combined.concat(msgs.map(m => ({type:'message', ...m})));
    const csv = toCSV(combined);
    if(!csv){ alert('No data to export'); return; }
    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'nrh_registrations_' + (new Date().toISOString().slice(0,10)) + '.csv';
    a.click();
    URL.revokeObjectURL(url);
});

/* small helper to escape HTML for table rendering */
function escapeHtml(s){
    if(!s) return '';
    return String(s).replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; });
}

/* admin modal close on backdrop click */
document.getElementById('adminModal').addEventListener('click', function(e){
    if(e.target === this) this.style.display = 'none';
});

/* Simple: scroll to anchors smoothly */
document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', function(e){
        const target = document.querySelector(this.getAttribute('href'));
        if(target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
    });
});

/* optional: clear localStorage (only for you, not exposed) */
// localStorage.removeItem(STORAGE_KEYS.students); localStorage.removeItem(STORAGE_KEYS.tutors); localStorage.removeItem(STORAGE_KEYS.messages);

</script>

</body>
</html>

